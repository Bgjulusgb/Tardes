# Trading Signals Server

Start a FastAPI server that analyzes multiple symbols every minute with multi-strategy TA, streams live signals via SSE to a dashboard, and optionally sends Web Push notifications. Optional Alpaca auto-trading via environment.

## Quickstart

1. Install dependencies

```bash
python -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt
```

2. Set environment (optional)

```bash
export SYMBOLS="AAPL,MSFT,BTC-USD,ETH-USD"
export YF_PERIOD="6mo"
export YF_INTERVAL="1d"
export ACCOUNT_EQUITY="10000"
export RISK_PER_TRADE_PCT="1.0"
export AUTO_TRADE="false"
# Alpaca (optional)
export ALPACA_API_KEY="..."
export ALPACA_API_SECRET="..."
export ALPACA_BASE_URL="https://paper-api.alpaca.markets"
# VAPID keys (optional, autogenerated if missing)
export VAPID_SUBJECT="mailto:you@example.com"
```

3. Run the server

```bash
python main.py
```

4. Open the dashboard

Visit http://localhost:8000 and click “Benachrichtigungen aktivieren” to opt-in to push.

## Endpoints

- GET `/` – dashboard
- GET `/events` – Server-Sent Events stream of signals
- POST `/analyze` – run an immediate analysis cycle
- GET `/config` – current server config
- GET `/vapid` – public VAPID key
- POST `/subscribe` – save a push subscription

## Notes

- The scheduler runs every minute on startup.
- Signals include action, quantity, position percent, entry price, TP/SL prices, confidence, and per-strategy votes.
- To enable auto-trading set `AUTO_TRADE=true` and provide Alpaca credentials.